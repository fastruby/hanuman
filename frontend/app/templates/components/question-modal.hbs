{{#ember-remodal
  forService=true
  name='question-modal'
  closeOnOutsideClick=false
  disableNativeClose=true
}}

  {{#if question.errors.length}}
    <div class="row">
      <div class="col-sm-12">
        <div class='alert alert-danger'>
          <h4>There was a problem</h4>
          <p>The question could not be saved due to validation errors. Question text and answer type are required.</p>
        </div>
      </div>
    </div>
  {{/if}}

  <div class="panel panel-info">
    <div class="panel-heading"><h3 class="panel-title">Question Details</h3></div>
    <div class="panel-body">
      <form>
        <div class="form-group">
          {{#if isFullyEditable}}
            <select class="form-control" onchange={{action "setAnswerType" value="target.value"}}>
              {{#each answerTypes as |answerType|}}
                <option value={{answerType.id}} selected={{eq question.answerType.id answerType.id}}>{{answerType.name}}</option>
              {{/each}}
            </select>
          {{else}}
            {{question.answerType.name}}
            <div class="alert alert-danger">
              Answer Type cannot be changed on a survey template with survey data submitted. Duplicate survey template to change the Answer Type.
            </div>
          {{/if}}
        </div>

        <div class="form-group">
          <div class="col-sm-6">
            <label for="questionText">Label</label>
            {{input type="text" value=question.questionText class="form-control" id="questionText"}}
          </div>
        </div>


        <div class="form-group">
          <div class="col-sm-6">
            {{input type="checkbox" name="isRequired" checked=question.required}} Required
          </div>
        </div>

        <div class="form-group">
          <div class="col-sm-6">
            {{input type="checkbox" name="isHidden" checked=question.hidden}} Hidden
          </div>
        </div>

        <div class="form-group">
          <div class="col-sm-6">
            <label for="externalDataSource">External Data Source (Superuser only)</label>
            {{input type="text" value=question.externalDataSource class="form-control" id="externalDataSource"}}
          </div>
        </div>

        <div class="form-group">
          <div class="col-sm-6">
            <label for="ancestry">Ancestry</label>
            {{input type="text" value=question.ancestry class="form-control" id="ancestry"}}
          </div>
        </div>

        <div class="form-group">
          <div class="col-sm-6">
            <label for="ancestry">Conditional Logic</label>
            <p>{{question.rule.matchType}}</p>
            {{#each uestion.rule.conditions as |condition|}}
              <p>
                if {{condition.questionId}} {{condition.operator}} {{condition.answer}}
              </p>
            {{/each}}
          </div>
        </div>

        <div class="row">
          <div class="form-group">
            <div class="col-sm-12">
              <a class="btn btn-primary" href="#" {{action "save" on="click"}}>
                Save
              </a>
              <a class="btn btn-default" onclick={{action "closeModal"}}>
                Cancel
              </a>
            </div>
          </div>
        </div>

      </form>

    </div>
  </div>
{{/ember-remodal}}